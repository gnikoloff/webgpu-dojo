!function(){"use strict";function t(t,s,o,h){return new(o=o||Promise)(function(i,e){function r(t){try{a(h.next(t))}catch(t){e(t)}}function n(t){try{a(h.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,n)}a((h=h.apply(t,s||[])).next())})}const l="front",p="back",m="bottom",v="left",f="right";var y=1e-6,n="undefined"!=typeof Float32Array?Float32Array:Array;function a(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function b(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var B=function(t,e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],h=e[5],u=e[6],d=e[7],c=e[8],l=e[9],p=e[10],m=e[11],v=e[12],f=e[13],y=e[14],x=e[15],w=i[0],_=i[1],M=i[2],e=i[3];return t[0]=w*r+_*o+M*c+e*v,t[1]=w*n+_*h+M*l+e*f,t[2]=w*a+_*u+M*p+e*y,t[3]=w*s+_*d+M*m+e*x,w=i[4],_=i[5],M=i[6],e=i[7],t[4]=w*r+_*o+M*c+e*v,t[5]=w*n+_*h+M*l+e*f,t[6]=w*a+_*u+M*p+e*y,t[7]=w*s+_*d+M*m+e*x,w=i[8],_=i[9],M=i[10],e=i[11],t[8]=w*r+_*o+M*c+e*v,t[9]=w*n+_*h+M*l+e*f,t[10]=w*a+_*u+M*p+e*y,t[11]=w*s+_*d+M*m+e*x,w=i[12],_=i[13],M=i[14],e=i[15],t[12]=w*r+_*o+M*c+e*v,t[13]=w*n+_*h+M*l+e*f,t[14]=w*a+_*u+M*p+e*y,t[15]=w*s+_*d+M*m+e*x,t};function T(){var t=new n(3);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function A(t,e,i){var r=new n(3);return r[0]=t,r[1]=e,r[2]=i,r}function L(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function E(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function U(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function R(t,e){var i=e[0],r=e[1],n=e[2],n=i*i+r*r+n*n;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function s(t,e,i){var r=e[0],n=e[1],a=e[2],s=i[0],e=i[1],i=i[2];return t[0]=n*i-a*e,t[1]=a*s-r*i,t[2]=r*e-n*s,t}var F=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};function w(){var t=new n(2);return n!=Float32Array&&(t[0]=0,t[1]=0),t}T(),w();class e{constructor(){this.position=A(0,0,0),this.rotation=A(0,0,0),this.scale=A(1,1,1),this.modelMatrix=a(),this.shouldUpdate=!0}copyFromMatrix(t){return b(this.modelMatrix,t),this.shouldUpdate=!1,this}setPosition(t){var{x:e=this.position[0],y:i=this.position[1],z:t=this.position[2]}=t;return L(this.position,e,i,t),this.shouldUpdate=!0,this}setScale(t){var{x:e=this.scale[0],y:i=this.scale[1],z:t=this.scale[2]}=t;return L(this.scale,e,i,t),this.shouldUpdate=!0,this}setRotation(t){var{x:e=this.rotation[0],y:i=this.rotation[1],z:t=this.rotation[2]}=t;return L(this.rotation,e,i,t),this.shouldUpdate=!0,this}updateModelMatrix(){var t,e,i,r,n,a,s,o,h,u,d,c,l,p,m,v,f;return x(this.modelMatrix),p=this.modelMatrix,a=this.modelMatrix,l=this.position,c=l[0],m=l[1],u=l[2],a===p?(p[12]=a[0]*c+a[4]*m+a[8]*u+a[12],p[13]=a[1]*c+a[5]*m+a[9]*u+a[13],p[14]=a[2]*c+a[6]*m+a[10]*u+a[14],p[15]=a[3]*c+a[7]*m+a[11]*u+a[15]):(t=a[0],e=a[1],h=a[2],d=a[3],i=a[4],r=a[5],v=a[6],f=a[7],n=a[8],s=a[9],o=a[10],l=a[11],p[0]=t,p[1]=e,p[2]=h,p[3]=d,p[4]=i,p[5]=r,p[6]=v,p[7]=f,p[8]=n,p[9]=s,p[10]=o,p[11]=l,p[12]=t*c+i*m+n*u+a[12],p[13]=e*c+r*m+s*u+a[13],p[14]=h*c+v*m+o*u+a[14],p[15]=d*c+f*m+l*u+a[15]),s=this.modelMatrix,h=this.modelMatrix,v=this.rotation[0],o=Math.sin(v),p=Math.cos(v),d=h[4],c=h[5],f=h[6],m=h[7],l=h[8],u=h[9],a=h[10],v=h[11],h!==s&&(s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15]),s[4]=d*p+l*o,s[5]=c*p+u*o,s[6]=f*p+a*o,s[7]=m*p+v*o,s[8]=l*p-d*o,s[9]=u*p-c*o,s[10]=a*p-f*o,s[11]=v*p-m*o,h=this.modelMatrix,l=this.modelMatrix,d=this.rotation[1],u=Math.sin(d),c=Math.cos(d),a=l[0],f=l[1],s=l[2],v=l[3],p=l[8],m=l[9],o=l[10],d=l[11],l!==h&&(h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=a*c-p*u,h[1]=f*c-m*u,h[2]=s*c-o*u,h[3]=v*c-d*u,h[8]=a*u+p*c,h[9]=f*u+m*c,h[10]=s*u+o*c,h[11]=v*u+d*c,l=this.modelMatrix,a=this.modelMatrix,p=this.rotation[2],f=Math.sin(p),m=Math.cos(p),s=a[0],o=a[1],h=a[2],v=a[3],u=a[4],d=a[5],c=a[6],p=a[7],a!==l&&(l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[0]=s*m+u*f,l[1]=o*m+d*f,l[2]=h*m+c*f,l[3]=v*m+p*f,l[4]=u*m-s*f,l[5]=d*m-o*f,l[6]=c*m-h*f,l[7]=p*m-v*f,l=this.modelMatrix,p=this.modelMatrix,m=this.scale,v=m[0],f=m[1],m=m[2],l[0]=p[0]*v,l[1]=p[1]*v,l[2]=p[2]*v,l[3]=p[3]*v,l[4]=p[4]*f,l[5]=p[5]*f,l[6]=p[6]*f,l[7]=p[7]*f,l[8]=p[8]*m,l[9]=p[9]*m,l[10]=p[10]*m,l[11]=p[11]*m,l[12]=p[12],l[13]=p[13],l[14]=p[14],l[15]=p[15],this.shouldUpdate=!1,this}}class P extends e{constructor(){super(...arguments),this.renderable=!1,this.parentNode=null,this.children=[],this.worldMatrix=a(),this.normalMatrix=a(),this.setParent=(t=null)=>{var e;return!this.parentNode||0<=(e=this.parentNode.children.indexOf(this))&&this.parentNode.children.splice(e,1),t&&t.children.push(this),this.parentNode=t,this},this.updateWorldMatrix=(t=null)=>{var e,i,r,n,a,s,o,h,u,d,c,l,p,m,v,f,y,x,w,_,M,g,A,E,U,F,P,S,D;return this.shouldUpdate&&this.updateModelMatrix(),t?B(this.worldMatrix,t,this.modelMatrix):b(this.worldMatrix,this.modelMatrix),g=this.normalMatrix,D=this.worldMatrix,e=D[0],i=D[1],r=D[2],n=D[3],a=D[4],s=D[5],o=D[6],h=D[7],A=D[8],U=D[9],P=D[10],u=D[11],d=D[12],c=D[13],l=D[14],p=D[15],(D=(S=e*s-i*a)*(M=P*p-u*l)-(F=e*o-r*a)*(_=U*p-u*c)+(m=e*h-n*a)*(w=U*l-P*c)+(E=i*o-r*s)*(x=A*p-u*d)-(v=i*h-n*s)*(y=A*l-P*d)+(f=r*h-n*o)*(t=A*c-U*d))&&(g[0]=(s*M-o*_+h*w)*(D=1/D),g[1]=(r*_-i*M-n*w)*D,g[2]=(c*f-l*v+p*E)*D,g[3]=(P*v-U*f-u*E)*D,g[4]=(o*x-a*M-h*y)*D,g[5]=(e*M-r*x+n*y)*D,g[6]=(l*m-d*f-p*F)*D,g[7]=(A*f-P*m+u*F)*D,g[8]=(a*_-s*x+h*t)*D,g[9]=(i*x-e*_-n*t)*D,g[10]=(d*v-c*m+p*S)*D,g[11]=(U*m-A*v-u*S)*D,g[12]=(s*y-a*w-o*t)*D,g[13]=(e*w-i*y+r*t)*D,g[14]=(c*F-d*E-l*S)*D,g[15]=(A*E-U*F+P*S)*D),g=this.normalMatrix,A=this.normalMatrix,g===A?(E=A[1],U=A[2],F=A[3],P=A[6],S=A[7],D=A[11],g[1]=A[4],g[2]=A[8],g[3]=A[12],g[4]=E,g[6]=A[9],g[7]=A[13],g[8]=U,g[9]=P,g[11]=A[14],g[12]=F,g[13]=S,g[14]=D):(g[0]=A[0],g[1]=A[4],g[2]=A[8],g[3]=A[12],g[4]=A[1],g[5]=A[5],g[6]=A[9],g[7]=A[13],g[8]=A[2],g[9]=A[6],g[10]=A[10],g[11]=A[14],g[12]=A[3],g[13]=A[7],g[14]=A[11],g[15]=A[15]),this.children.forEach(t=>{t.updateWorldMatrix(this.worldMatrix)}),this},this.traverseGraph=(e,t=this)=>(e(t),this.children.forEach(t=>t.traverseGraph(e)),this)}}const o=(t,e,i)=>Math.min(Math.max(t,e),i),S=(t,e,i)=>(i-t)/(e-t),D=t=>(t-=2*Math.floor(.5*t),t=Math.min(Math.max(t,0),2),1-Math.abs(t-1));class h{constructor(){this.value=0,this.damping=.5}addForce(t){this.value+=t}update(){return 1e-6<this.value*this.value?this.value*=this.damping:this.stop(),this.value}stop(){this.value=0}}class H{constructor(t,e=document.body,i=!1,r=1){this.target=T(),this.minDistance=0,this.maxDistance=1/0,this.isEnabled=!0,this.targetXDampedAction=new h,this.targetYDampedAction=new h,this.targetZDampedAction=new h,this.targetThetaDampedAction=new h,this.targetPhiDampedAction=new h,this.targetRadiusDampedAction=new h,this._isShiftDown=!1,this._rotateStart={x:9999,y:9999},this._rotateEnd={x:9999,y:9999},this._roatteDelta={x:9999,y:9999},this._zoomDistanceEnd=0,this._zoomDistance=0,this.state="",this.loopId=0,this._panStart={x:0,y:0},this._panDelta={x:0,y:0},this._panEnd={x:0,y:0},this._paused=!1,this._isDebug=!1,this.mouseWheelForce=1,this.mouseWheelForce=r,this.camera=t,this.domElement=e,this.isDamping=!1,this.dampingFactor=.25,this.isZoom=!0,this.zoomSpeed=1,this.isRotate=!0,this.rotateSpeed=1,this.isPan=!0,this.keyPanSpeed=7,this.enableKeys=!0,this.keys={LEFT:"37",UP:"38",RIGHT:"39",BOTTOM:"40",SHIFT:"16"},this.originTarget=T(),this.originPosition=T(),this.originPosition[0]=t.position[0],this.originPosition[1]=t.position[0],this.originPosition[2]=t.position[0];r=this.camera.position[0],e=this.camera.position[1],t=this.camera.position[2],r=Math.sqrt(r*r+e*e+t*t),e=Math.atan2(this.camera.position[0],this.camera.position[2]),t=Math.acos(o(this.camera.position[1]/r,-1,1));this._spherical={radius:r,theta:e,phi:t},this._bindEvens(),this.setEventHandler(),this.startTick(),(this._isDebug=i)&&(this._outputEl=document.createElement("div"),this._outputEl.setAttribute("style",`
      position: fixed;
      bottom: 24px;
      left: 24px;
      z-index: 999;
      font-family: monospace;
      font-size: 14px;
      user-select: none;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 4px;
      padding: 3px 6px;
    `),document.body.appendChild(this._outputEl))}lookAt([t,e,i]){return L(this.target,t,e,i),this}setEventHandler(){this.domElement.addEventListener("contextmenu",this._contextMenuHandler,!1),this.domElement.addEventListener("mousedown",this._mouseDownHandler,!1),this.domElement.addEventListener("wheel",this._mouseWheelHandler,!1),this.domElement.addEventListener("touchstart",this._touchStartHandler,!1),this.domElement.addEventListener("touchmove",this._touchMoveHandler,!1),window.addEventListener("keydown",this._onKeyDownHandler,!1),window.addEventListener("keyup",this._onKeyUpHandler,!1)}removeEventHandler(){this.domElement.removeEventListener("contextmenu",this._contextMenuHandler,!1),this.domElement.removeEventListener("mousedown",this._mouseDownHandler,!1),this.domElement.removeEventListener("wheel",this._mouseWheelHandler,!1),this.domElement.removeEventListener("mousemove",this._mouseMoveHandler,!1),window.removeEventListener("mouseup",this._mouseUpHandler,!1),this.domElement.removeEventListener("touchstart",this._touchStartHandler,!1),this.domElement.removeEventListener("touchmove",this._touchMoveHandler,!1),window.removeEventListener("keydown",this._onKeyDownHandler,!1),window.removeEventListener("keydown",this._onKeyUpHandler,!1)}startTick(){this.loopId=requestAnimationFrame(this.tick)}pause(){this._paused=!0}start(){this._paused=!1}tick(){var t,e,i;this._paused||(this.updateDampedAction(),this.updateCamera(),this._isDebug&&(t=Math.round(100*this.camera.position[0])/100,e=Math.round(100*this.camera.position[1])/100,i=Math.round(100*this.camera.position[2])/100,this._outputEl.textContent=`x: ${t} y: ${e} z: ${i}`)),this.loopId=requestAnimationFrame(this.tick)}updateDampedAction(){this.target[0]+=this.targetXDampedAction.update(),this.target[1]+=this.targetYDampedAction.update(),this.target[2]+=this.targetZDampedAction.update(),this._spherical.theta+=this.targetThetaDampedAction.update(),this._spherical.phi+=this.targetPhiDampedAction.update(),this._spherical.radius+=this.targetRadiusDampedAction.update()}updateCamera(){var t=this._spherical,e=Math.sin(t.phi)*t.radius;this.camera.position[0]=e*Math.sin(t.theta)+this.target[0],this.camera.position[1]=Math.cos(t.phi)*t.radius+this.target[1],this.camera.position[2]=e*Math.cos(t.theta)+this.target[2],this.camera.lookAtPosition[0]=this.target[0],this.camera.lookAtPosition[1]=this.target[1],this.camera.lookAtPosition[2]=this.target[2],this.camera.updateViewMatrix()}_bindEvens(){this.tick=this.tick.bind(this),this._contextMenuHandler=this._contextMenuHandler.bind(this),this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._touchStartHandler=this._touchStartHandler.bind(this),this._touchMoveHandler=this._touchMoveHandler.bind(this),this._onKeyDownHandler=this._onKeyDownHandler.bind(this),this._onKeyUpHandler=this._onKeyUpHandler.bind(this)}_contextMenuHandler(t){this.isEnabled&&t.preventDefault()}_mouseDownHandler(t){this.isEnabled&&(0===t.button?(this.state="rotate",this._rotateStart={x:t.clientX,y:t.clientY}):(this.state="pan",this._panStart={x:t.clientX,y:t.clientY}),this.domElement.addEventListener("mousemove",this._mouseMoveHandler,!1),window.addEventListener("mouseup",this._mouseUpHandler,!1))}_mouseUpHandler(){this.domElement.removeEventListener("mousemove",this._mouseMoveHandler,!1),window.removeEventListener("mouseup",this._mouseUpHandler,!1)}_mouseMoveHandler(t){this.isEnabled&&("rotate"===this.state?(this._rotateEnd={x:t.clientX,y:t.clientY},this._roatteDelta={x:this._rotateEnd.x-this._rotateStart.x,y:this._rotateEnd.y-this._rotateStart.y},this._updateRotateHandler(),this._rotateStart={x:this._rotateEnd.x,y:this._rotateEnd.y}):"pan"===this.state&&(this._panEnd={x:t.clientX,y:t.clientY},this._panDelta={x:-.5*(this._panEnd.x-this._panStart.x),y:.5*(this._panEnd.y-this._panStart.y)},this._updatePanHandler(),this._panStart={x:this._panEnd.x,y:this._panEnd.y}))}_mouseWheelHandler(t){var e=this.mouseWheelForce;0<t.deltaY?this.targetRadiusDampedAction.addForce(e):this.targetRadiusDampedAction.addForce(-e)}_touchStartHandler(t){var e,i;switch(t.touches.length){case 1:this.state="rotate",this._rotateStart={x:t.touches[0].clientX,y:t.touches[0].clientY};break;case 2:this.state="zoom",e=t.touches[1].clientX-t.touches[0].clientX,i=t.touches[1].clientY-t.touches[0].clientY,this._zoomDistance=Math.sqrt(e*e+i*i);break;case 3:this.state="pan",this._panStart={x:(t.touches[0].clientX+t.touches[1].clientX+t.touches[2].clientX)/3,y:(t.touches[0].clientY+t.touches[1].clientY+t.touches[2].clientY)/3}}}_touchMoveHandler(t){var e;switch(t.preventDefault(),t.touches.length){case 1:if("rotate"!==this.state)return;this._rotateEnd={x:t.touches[0].clientX,y:t.touches[0].clientY},this._roatteDelta={x:.5*(this._rotateEnd.x-this._rotateStart.x),y:.5*(this._rotateEnd.y-this._rotateStart.y)},this._updateRotateHandler(),this._rotateStart={x:this._rotateEnd.x,y:this._rotateEnd.y};break;case 2:if("zoom"!==this.state)return;e=t.touches[1].clientX-t.touches[0].clientX,i=t.touches[1].clientY-t.touches[0].clientY,this._zoomDistanceEnd=Math.sqrt(e*e+i*i);var i=this._zoomDistanceEnd-this._zoomDistance,i=this._spherical.radius-(i*=1.5),i=o(i,this.minDistance,this.maxDistance);this._zoomDistance=this._zoomDistanceEnd,this._spherical.radius=i;break;case 3:this._panEnd={x:(t.touches[0].clientX+t.touches[1].clientX+t.touches[2].clientX)/3,y:(t.touches[0].clientY+t.touches[1].clientY+t.touches[2].clientY)/3},this._panDelta={x:this._panEnd.x-this._panStart.x,y:this._panEnd.y-this._panStart.y},this._panDelta.x*=-1,this._updatePanHandler(),this._panStart={x:this._panEnd.x,y:this._panEnd.y}}}_onKeyDownHandler(t){let e=0,i=0;switch(t.key){case this.keys.SHIFT:this._isShiftDown=!0;break;case this.keys.LEFT:e=-10;break;case this.keys.RIGHT:e=10;break;case this.keys.UP:i=10;break;case this.keys.BOTTOM:i=-10}this._isShiftDown?(this._roatteDelta={x:-e,y:i},this._updateRotateHandler()):(this._panDelta={x:e,y:i},this._updatePanHandler())}_onKeyUpHandler(t){t.key===this.keys.SHIFT&&(this._isShiftDown=!1)}_updatePanHandler(){var t=T(),e=T();const i=T();i[0]=this.target[0]-this.camera.position[0],i[1]=this.target[1]-this.camera.position[1],i[2]=this.target[2]-this.camera.position[2],R(i,i),s(t,i,[0,1,0]),s(e,t,i);var r=Math.max(this._spherical.radius/2e3,.001);this.targetXDampedAction.addForce((t[0]*this._panDelta.x+e[0]*this._panDelta.y)*r),this.targetYDampedAction.addForce((t[1]*this._panDelta.x+e[1]*this._panDelta.y)*r),this.targetZDampedAction.addForce((t[2]*this._panDelta.x+e[2]*this._panDelta.y)*r)}_updateRotateHandler(){this.targetThetaDampedAction.addForce(-this._roatteDelta.x/this.domElement.clientWidth),this.targetPhiDampedAction.addForce(-this._roatteDelta.y/this.domElement.clientHeight)}}class k{constructor(t,e,i,r){this.position=[0,0,0],this.lookAtPosition=[0,0,0],this.projectionMatrix=a(),this.viewMatrix=a(),this.zoom=1,this.fieldOfView=t,this.aspect=e,this.near=i,this.far=r,this.updateProjectionMatrix()}setPosition({x:t=this.position[0],y:e=this.position[1],z:i=this.position[2]}){return this.position=[t,e,i],this}updateViewMatrix(){var t,e,i,r,n,a,s,o,h,u,d,c,l,p;return t=this.viewMatrix,e=this.position,i=this.lookAtPosition,r=k.UP_VECTOR,a=e[0],s=e[1],o=e[2],h=r[0],u=r[1],d=r[2],c=i[0],l=i[1],p=i[2],Math.abs(a-c)<y&&Math.abs(s-l)<y&&Math.abs(o-p)<y?x(t):(n=a-c,e=s-l,r=o-p,c=u*(r*=i=1/Math.hypot(n,e,r))-d*(e*=i),l=d*(n*=i)-h*r,p=h*e-u*n,(i=Math.hypot(c,l,p))?(c*=i=1/i,l*=i,p*=i):p=l=c=0,d=e*p-r*l,h=r*c-n*p,u=n*l-e*c,(i=Math.hypot(d,h,u))?(d*=i=1/i,h*=i,u*=i):u=h=d=0,t[0]=c,t[1]=d,t[2]=n,t[3]=0,t[4]=l,t[5]=h,t[6]=e,t[7]=0,t[8]=p,t[9]=u,t[10]=r,t[11]=0,t[12]=-(c*a+l*s+p*o),t[13]=-(d*a+h*s+u*o),t[14]=-(n*a+e*s+r*o),t[15]=1),this}updateProjectionMatrix(){var t,e,i,r,n;return t=this.projectionMatrix,e=this.fieldOfView,i=this.aspect,r=this.near,n=this.far,e=1/Math.tan(e/2),t[0]=e/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(e=1/(r-n)),t[14]=2*n*r*e):(t[10]=-1,t[14]=-2*r),this}lookAt(t){return this.lookAtPosition=t,this.updateViewMatrix(),this}}function _(i,r,n,a,s,t,o,h,u,d=0,c=1,l=2,p=1,m=-1,v=0,f=0){var y=v,x=s/h,w=t/u;for(let e=0;e<=u;e++){var _=e*w-t/2;for(let t=0;t<=h;t++,v++){var M,g,A,E=t*x-s/2;i[3*v+d]=E*p,i[3*v+c]=_*m,i[3*v+l]=o/2,r[3*v+d]=0,r[3*v+c]=0,r[3*v+l]=0<=o?1:-1,n[2*v]=t/h,n[2*v+1]=1-e/u,e!==u&&t!==h&&(M=y+t+e*(h+1),g=y+t+(e+1)*(h+1),A=y+t+(e+1)*(h+1)+1,E=y+t+e*(h+1)+1,a[6*f]=M,a[6*f+1]=g,a[6*f+2]=E,a[6*f+3]=g,a[6*f+4]=A,a[6*f+5]=E,f++)}}}function i(t={}){var{width:e=1,height:i=1,depth:r=1,widthSegments:n=1,heightSegments:a=1,depthSegments:s=1}=t,o=n,h=a,u=s,d=(o+1)*(h+1)*2+(o+1)*(u+1)*2+(h+1)*(u+1)*2,c=6*(o*h*2+o*u*2+h*u*2),t=new Float32Array(3*d),n=new Float32Array(3*d),a=new Float32Array(2*d),s=new(65536<d?Uint32Array:Uint16Array)(c),d=0,c=0;return _(t,n,a,s,r,i,e,u,h,2,1,0,-1,-1,0,0),_(t,n,a,s,r,i,-e,u,h,2,1,0,1,-1,d+=(u+1)*(h+1),c+=u*h),_(t,n,a,s,e,r,i,u,h,0,2,1,1,1,d+=(u+1)*(h+1),c+=u*h),_(t,n,a,s,e,r,-i,u,h,0,2,1,1,-1,d+=(o+1)*(u+1),c+=o*u),_(t,n,a,s,e,i,-r,o,h,0,1,2,-1,-1,d+=(o+1)*(u+1),c+=o*u),_(t,n,a,s,e,i,r,o,h,0,1,2,1,-1,d+=(o+1)*(h+1),c+=o*h),{vertices:t,normal:n,uv:a,indices:s}}function r(t={}){var{width:e=1,height:i=1,depth:r=1,widthSegments:n=1,heightSegments:a=1,depthSegments:s=1}=t,o=n,h=a,u=s;const d=[];var c=(u+1)*(h+1),t=u*h*6,n=new Float32Array(3*c),a=new Float32Array(3*c),s=new Float32Array(2*c),c=new(65536<c?Uint32Array:Uint16Array)(t);_(n,a,s,c,r,i,e,u,h,2,1,0,-1,-1,0,0),d.push({orientation:f,vertices:n,normal:a,uv:s,indices:c});t=(u+1)*(h+1),n=u*h*6,a=new Float32Array(3*t),s=new Float32Array(3*t),c=new Float32Array(2*t),t=new(65536<t?Uint32Array:Uint16Array)(n);_(a,s,c,t,r,i,-e,u,h,2,1,0,1,-1,0,0),d.push({orientation:v,vertices:a,normal:s,uv:c,indices:t});n=(u+1)*(h+1),a=u*h*6,s=new Float32Array(3*n),c=new Float32Array(3*n),t=new Float32Array(2*n),n=new(65536<n?Uint32Array:Uint16Array)(a);_(s,c,t,n,e,r,i,u,h,0,2,1,1,1,0,0),d.push({orientation:"top",vertices:s,normal:c,uv:t,indices:n});a=(u+1)*(h+1),s=u*h*6,c=new Float32Array(3*a),t=new Float32Array(3*a),n=new Float32Array(2*a),s=new(65536<a?Uint32Array:Uint16Array)(s);_(c,t,n,s,e,r,-i,u,h,0,2,1,1,-1,0,0),d.push({orientation:m,vertices:c,normal:t,uv:n,indices:s});c=(o+1)*(u+1),t=o*u*6,n=new Float32Array(3*c),s=new Float32Array(3*c),u=new Float32Array(2*c),c=new(65536<c?Uint32Array:Uint16Array)(t);_(n,s,u,c,e,i,-r,o,h,0,1,2,-1,-1,0,0),d.push({orientation:p,vertices:n,normal:s,uv:u,indices:c});t=(o+1)*(h+1),n=o*h*6,s=new Float32Array(3*t),u=new Float32Array(3*t),c=new Float32Array(2*t),n=new(65536<t?Uint32Array:Uint16Array)(n);return _(s,u,c,n,e,i,r,o,h,0,1,2,1,-1,0,0),d.push({orientation:l,vertices:s,normal:u,uv:c,indices:n}),d}k.UP_VECTOR=[0,1,0];class u{static xp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=i,e[1]=-t,e[2]=r,e}static xn(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=i,e[1]=t,e[2]=-r,e}static yp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=-t,e[1]=r,e[2]=i,e}static yn(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=t,e[1]=r,e[2]=-i,e}static zp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=r,e[1]=-i,e[2]=t,e}static zn(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=-r,e[1]=i,e[2]=t,e}static xp_yn(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=-r,e[1]=-t,e[2]=i,e}static xp_yp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=r,e[1]=-t,e[2]=-i,e}static xp_yp_yp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=-i,e[1]=-t,e[2]=-r,e}static xp_xp(t,e){var i=t[0],r=t[1],t=t[2];return e[0]=i,e[1]=-r,e[2]=-t,e}}var d=({width:t=1,height:e=1,depth:i=1,radius:r=.5,div:n=4})=>{r=function(t=2,e=2,i=2,a=.5,s=4){const o=t/2,r=e/2,h=i/2,u=2*s,d=[],c=[],l=[],p=T();let n,m,v,f,y,x,w,_;w=r;const M=[A(a-o,r-a,a-h),A(o-a,r-a,a-h),A(a-o,r-a,h-a),A(o-a,r-a,h-a)],g=(t,e)=>{var i,r,n=S(-h,h,t);for(v=0;v<=u;v++)r=v<=s?0:1,i=D(v/s),y=v<=s?-1:1,x=o*y+a*i*-y,L(p,x,w,t),F(p,p,M[r|e]),R(p,p),l.push(p[0],p[1],p[2]),U(p,p,a),E(p,p,M[r|e]),d.push(p[0],p[1],p[2]),c.push(S(-o,o,x),n),1==i&&(L(p,o-a,w,t),F(p,p,M[1|e]),R(p,p),l.push(p[0],p[1],p[2]),U(p,p,a),E(p,p,M[1|e]),d.push(p[0],p[1],p[2]),c.push(S(-o,o,o-a),n))};for(m=0;m<=u;m++)n=m<=s?0:2,f=D(m/s),y=m<=s?-1:1,_=h*y+a*f*-y,g(_,n),1==f&&g(h-a,2);return{verts:d,uv:c,norm:l,indices:function(t,e){let i=[],r=t+1,n,a,s,o,h,u;for(a=0;a<e;a++)for(n=0;n<t;n++)s=a*r+n,o=s+r,h=o+1,u=s+1,i.push(s,o,h,h,u,s);return i}(1+u,1+u)}}(t,e,i,r,n),n={verts:[],indices:[],uv:[],norm:[]};return c(n,r,(t,e)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e)),c(n,r,u.xp),c(n,r,u.xp_yp),c(n,r,u.xp_yp_yp),c(n,r,u.xp_yn),c(n,r,u.xp_xp),{vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}};function c(e,i,r){var t=e.verts.length/3,n=i.verts.length;const a=T(),s=T();for(let t=0;t<n;t+=3)L(a,i.verts[t],i.verts[t+1],i.verts[t+2]),r(a,s),e.verts.push(s[0],s[1],s[2]),L(a,i.norm[t],i.norm[t+1],i.norm[t+2]),r(a,s),e.norm.push(s[0],s[1],s[2]);for(const a of i.uv)e.uv.push(a);for(const a of i.indices)e.indices.push(t+a)}var M=({width:t=1,height:e=1,depth:i=1,radius:r=.5,div:n=4})=>{r=function(t=2,e=2,i=2,a=.5,s=4){const o=t/2,r=e/2,h=i/2,u=2*s,d=[],c=[],l=[],p=T();let n,m,v,f,y,x,w,_;w=r;const M=[A(a-o,r-a,a-h),A(o-a,r-a,a-h),A(a-o,r-a,h-a),A(o-a,r-a,h-a)],g=(t,e)=>{var i,r,n=S(-h,h,t);for(v=0;v<=u;v++)r=v<=s?0:1,i=D(v/s),y=v<=s?-1:1,x=o*y+a*i*-y,L(p,x,w,t),F(p,p,M[r|e]),R(p,p),l.push(p[0],p[1],p[2]),U(p,p,a),E(p,p,M[r|e]),d.push(p[0],p[1],p[2]),c.push(S(-o,o,x),n),1==i&&(L(p,o-a,w,t),F(p,p,M[1|e]),R(p,p),l.push(p[0],p[1],p[2]),U(p,p,a),E(p,p,M[1|e]),d.push(p[0],p[1],p[2]),c.push(S(-o,o,o-a),n))};for(m=0;m<=u;m++)n=m<=s?0:2,f=D(m/s),y=m<=s?-1:1,_=h*y+a*f*-y,g(_,n),1==f&&g(h-a,2);return{verts:d,uv:c,norm:l,indices:function(t,e){let i=[],r=t+1,n,a,s,o,h,u;for(a=0;a<e;a++)for(n=0;n<t;n++)s=a*r+n,o=s+r,h=o+1,u=s+1,i.push(s,o,h,h,u,s);return i}(1+u,1+u)}}(t,e,i,r,n);const a=[];n={verts:[],indices:[],uv:[],norm:[]};return g(n,r,(t,e)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e)),a.push({orientation:"top",vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),g(n={verts:[],indices:[],uv:[],norm:[]},r,u.xp),a.push({orientation:l,vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),g(n={verts:[],indices:[],uv:[],norm:[]},r,u.xp_yp),a.push({orientation:v,vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),g(n={verts:[],indices:[],uv:[],norm:[]},r,u.xp_yp_yp),a.push({orientation:p,vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),g(n={verts:[],indices:[],uv:[],norm:[]},r,u.xp_yn),a.push({orientation:f,vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),g(n={verts:[],indices:[],uv:[],norm:[]},r,u.xp_xp),a.push({orientation:m,vertices:new Float32Array(n.verts),normal:new Float32Array(n.norm),uv:new Float32Array(n.uv),indices:new Uint16Array(n.indices)}),a};function g(e,i,r){var t=e.verts.length/3,n=i.verts.length;const a=T(),s=T();for(let t=0;t<n;t+=3)L(a,i.verts[t],i.verts[t+1],i.verts[t+2]),r(a,s),e.verts.push(s[0],s[1],s[2]),L(a,i.norm[t],i.norm[t+1],i.norm[t+2]),r(a,s),e.norm.push(s[0],s[1],s[2]);for(const a of i.uv)e.uv.push(a);for(const a of i.indices)e.indices.push(t+a)}function z(t={}){var{radius:i=1,segments:r=8,thetaStart:n=0,thetaLength:a=2*Math.PI}=t;const e=[],s=[],o=[],h=[],u=T(),d=w();s.push(0,0,0),o.push(0,0,1),h.push(.5,.5);for(let t=0,e=3;t<=r;t++,e+=3){var c=n+t/r*a;u[0]=i*Math.cos(c),u[1]=i*Math.sin(c),s.push(...u),o.push(0,0,1),d[0]=(s[e]/i+1)/2,d[1]=(s[e+1]/i+1)/2,h.push(d[0],d[1])}for(let t=1;t<=r;t++)e.push(t,t+1,0);return{indices:new(65536<r?Uint32Array:Uint16Array)(e),vertices:new Float32Array(s),normal:new Float32Array(o),uv:new Float32Array(h)}}function G(t={}){var{width:e=1,height:i=1,widthSegments:r=1,heightSegments:n=1}=t,a=r,s=n,o=(a+1)*(s+1),h=a*s*6,t=new Float32Array(3*o),r=new Float32Array(3*o),n=new Float32Array(2*o),h=new(65536<o?Uint32Array:Uint16Array)(h);return _(t,r,n,h,e,i,0,a,s),{vertices:t,normal:r,uv:n,indices:h}}function Y(t={}){var{radius:e=.5,widthSegments:i=16,heightSegments:r=Math.ceil(.5*i),phiStart:n=0,phiLength:a=2*Math.PI,thetaStart:s=0,thetaLength:t=Math.PI}=t,o=i,h=r,u=n,d=a,c=s,l=t,s=(o+1)*(h+1),t=o*h*6;const p=new Float32Array(3*s),m=new Float32Array(3*s),v=new Float32Array(2*s),f=new(65536<s?Uint32Array:Uint16Array)(t);let y=0,x=0,w=0;var _=c+l;const M=[];var g=T();for(let t=0;t<=h;t++){const H=[];var A=t/h;for(let t=0;t<=o;t++,y++){var E=t/o,U=-e*Math.cos(u+E*d)*Math.sin(c+A*l),F=e*Math.cos(c+A*l),P=e*Math.sin(u+E*d)*Math.sin(c+A*l);L(g,p[3*y]=U,p[3*y+1]=F,p[3*y+2]=P),R(g,g),m[3*y]=g[0],m[3*y+1]=g[1],m[3*y+2]=g[2],v[2*y]=E,v[2*y+1]=1-A,H.push(x++)}M.push(H)}for(let e=0;e<h;e++)for(let t=0;t<o;t++){var S=M[e][t+1],D=M[e][t],b=M[e+1][t],B=M[e+1][t+1];(0!==e||0<c)&&(f[3*w]=S,f[3*w+1]=D,f[3*w+2]=B,w++),(e!==h-1||_<Math.PI)&&(f[3*w]=D,f[3*w+1]=b,f[3*w+2]=B,w++)}return{vertices:p,normal:m,uv:v,indices:f}}function C(t={}){var{radius:i=.5,tube:r=.35,arc:n=2*Math.PI,radialSegments:e=8,tubularSegments:t=6}=t,a=Math.floor(e),s=Math.floor(t);const o=[],h=[],u=[],d=[],c=T(),l=T();var p=T();for(let e=0;e<=a;e++)for(let t=0;t<=s;t++){var m=t/s*n,v=e/a*Math.PI*2;l[0]=(i+r*Math.cos(v))*Math.cos(m),l[1]=(i+r*Math.cos(v))*Math.sin(m),l[2]=r*Math.sin(v),h.push(l[0],l[1],l[2]),c[0]=i*Math.cos(m),c[1]=i*Math.sin(m),F(p,l,c),R(p,p),u.push(p[0],p[1],p[0]),d.push(t/s,e/a)}for(let e=1;e<=a;e++)for(let t=1;t<=s;t++){var f=(s+1)*e+t-1,y=(s+1)*(e-1)+t-1,x=(s+1)*(e-1)+t,w=(s+1)*e+t;o.push(f,y,w),o.push(y,x,w)}return{indices:new(65536<(a+1)*(s+1)?Uint32Array:Uint16Array)(o),vertices:new Float32Array(h),normal:new Float32Array(u),uv:new Float32Array(d)}}var I=Object.freeze({__proto__:null,createBox:i,createBoxSeparateFace:r,createRoundedBoxSeparateFace:M,createRoundedBox:d,createCircle:z,createPlane:G,createSphere:Y,createTorus:C,GeometryUtils:{createBox:i,createBoxSeparateFace:r,createRoundedBoxSeparateFace:M,createRoundedBox:d,createCircle:z,createPlane:G,createSphere:Y,createTorus:C}});t(void 0,void 0,void 0,function*(){var t=yield null===(t=navigator.gpu)||void 0===t?void 0:t.requestAdapter();const e=`
    <div id="no-webgpu-wrapper">
      <div id="no-webgpu">
        WebGPU is not supported on this browser. Please try modern Google Chrome (Canary) or Firefox Nightly.
      </div>
    </div>
  `;window.addEventListener("unhandledrejection",t=>{document.body.innerHTML+=e}),window.addEventListener("error",t=>{document.body.innerHTML+=e}),t||(document.body.innerHTML+=e)});class O extends P{constructor(t,e,i){super(),this.device=null,this.indexBuffer=null,this.indices=null,this.transformUniformBuffer=null,this.transformUniformBindGroup=null,this.materialUniformBuffer=null,this.materialUniformBindGroup=null,this.geoBuffers=[],this.render=i=>{this.geoBuffers.forEach((t,e)=>{i.setVertexBuffer(e,t)}),i.setIndexBuffer(this.indexBuffer,this.indices instanceof Uint16Array?"uint16":"uint32"),this.device.queue.writeBuffer(this.transformUniformBuffer,0,this.worldMatrix),i.setBindGroup(1,this.transformUniformBindGroup),i.setBindGroup(2,this.materialUniformBindGroup),i.drawIndexed(this.indices.length)},this.device=t;var{vertices:r,uv:n,normal:a,indices:i}=i;const s=t.createBuffer({size:r.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});new Float32Array(s.getMappedRange()).set(r),s.unmap();const o=t.createBuffer({size:a.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});new Float32Array(o.getMappedRange()).set(a),o.unmap();const h=t.createBuffer({size:n.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});new Float32Array(h.getMappedRange()).set(n),h.unmap();const u=t.createBuffer({size:i.byteLength,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});new(i instanceof Uint16Array?Uint16Array:Uint32Array)(u.getMappedRange()).set(i),u.unmap(),this.geoBuffers=[s,o,h],this.indexBuffer=u,this.indices=i,this.transformUniformBuffer=t.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.transformUniformBindGroup=t.createBindGroup({layout:e.getBindGroupLayout(1),entries:[{binding:0,resource:{buffer:this.transformUniformBuffer}}]}),this.materialUniformBuffer=t.createBuffer({size:3*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});a=.35*Math.random()+.65,n=.35*Math.random()+.65,i=.35*Math.random()+.65;t.queue.writeBuffer(this.materialUniformBuffer,0,new Float32Array([a,n,i])),this.materialUniformBindGroup=t.createBindGroup({layout:e.getBindGroupLayout(2),entries:[{binding:0,resource:{buffer:this.materialUniformBuffer}}]})}}t(void 0,void 0,void 0,function*(){const t=document.getElementById("gpu-c");t.width=innerWidth*devicePixelRatio,t.height=innerHeight*devicePixelRatio,t.style.setProperty("width",`${innerWidth}px`),t.style.setProperty("height",`${innerHeight}px`);const e=yield null===(r=navigator.gpu)||void 0===r?void 0:r.requestAdapter(),a=yield null===e||void 0===e?void 0:e.requestDevice(),s=t.getContext("webgpu");var i=s.getPreferredFormat(e);s.configure({device:a,format:i});const o=a.createRenderPipeline({vertex:{module:a.createShaderModule({code:"\n[[block]]\nstruct Camera {\n  projectionMatrix: mat4x4<f32>;\n  viewMatrix: mat4x4<f32>;\n};\n\n[[group(0), binding(0)]]\nvar<uniform> camera: Camera;\n\n[[block]]\nstruct Transform {\n  modelMatrix: mat4x4<f32>;\n};\n\n[[group(1), binding(0)]]\nvar <uniform> transform: Transform;\n\nstruct Input {\n  [[location(0)]] position: vec4<f32>;\n  [[location(1)]] normal: vec3<f32>;\n  [[location(2)]] uv: vec2<f32>;\n};\n\nstruct Output {\n  [[builtin(position)]] Position: vec4<f32>;\n  [[location(0)]] normal: vec3<f32>;\n};\n\n[[stage(vertex)]]\nfn main (input: Input) -> Output {\n  var output: Output;\n\n  output.Position = camera.projectionMatrix *\n                    camera.viewMatrix *\n                    transform.modelMatrix *\n                    input.position;\n                    \n  output.normal = input.normal;\n\n  return output;\n}\n"}),entryPoint:"main",buffers:[{arrayStride:3*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:0,format:"float32x3",offset:0}]},{arrayStride:3*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:1,format:"float32x3",offset:0}]},{arrayStride:2*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:2,format:"float32x2",offset:0}]}]},fragment:{module:a.createShaderModule({code:"\n[[block]]\nstruct Material {\n  color: vec3<f32>;\n};\n\n[[group(2), binding(0)]]\nvar <uniform> material: Material;\n\nstruct Input {\n  [[location(0)]] normal: vec3<f32>;\n};\n\n[[stage(fragment)]]\n\nfn main (input: Input) -> [[location(0)]] vec4<f32> {\n  return vec4<f32>(\n    (normalize(input.normal) * 0.5 + 0.5) * material.color,\n    1.0\n  );\n}\n"}),entryPoint:"main",targets:[{format:i}]},primitive:{topology:"triangle-list",stripIndexFormat:void 0},multisample:{count:4},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}});var r=I.createSphere({radius:1});const h=new P,u=new O(a,o,r);u.setParent(h);const d=new P;d.setParent(h);const c=new O(a,o,r);c.setParent(d);const l=new P;l.setParent(d);const p=new O(a,o,r);p.setParent(l);const m=new P;m.setParent(l);const v=new O(a,o,r);v.setParent(m);const f=new P;f.setParent(h);const y=new O(a,o,r);y.setParent(f);const x=new P;x.setParent(f);const w=new O(a,o,r);w.setParent(x);const _=a.createBuffer({size:32*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),M=a.createBindGroup({layout:o.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:_}}]}),g=new k(45*Math.PI/180,t.width/t.height,.1,500);g.setPosition({x:0,y:-30,z:42}),g.lookAt([0,0,0]),g.updateProjectionMatrix(),g.updateViewMatrix(),new H(g);const A=a.createTexture({size:[t.width,t.height,1],format:"depth24plus",sampleCount:4,usage:GPUTextureUsage.RENDER_ATTACHMENT}),n=a.createTexture({size:[t.width,t.height],sampleCount:4,format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT});let E=n.createView();requestAnimationFrame(function t(e){requestAnimationFrame(t);e/=1e3;const i=a.createCommandEncoder();const r=i.beginRenderPass({colorAttachments:[{view:E,resolveTarget:s.getCurrentTexture().createView(),loadValue:[.1,.1,.1,1],storeOp:"store"}],depthStencilAttachment:{view:A.createView(),depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:0,stencilStoreOp:"store"}});a.queue.writeBuffer(_,0,g.projectionMatrix);a.queue.writeBuffer(_,16*Float32Array.BYTES_PER_ELEMENT,g.viewMatrix);r.setBindGroup(0,M);r.setPipeline(o);h.setPosition({x:4*Math.sin(e),y:4*Math.cos(e)}).setRotation({z:e}).updateModelMatrix();u.updateModelMatrix();d.setPosition({x:14}).setRotation({z:2*e}).updateModelMatrix();const n=+Math.sin(e)+1.5;c.setScale({x:n,y:n,z:n}).updateModelMatrix();l.setPosition({x:8}).setRotation({z:4*e}).updateModelMatrix();p.setScale({x:.8,y:.8,z:.8}).updateModelMatrix();m.setPosition({x:2.5}).setScale({x:.3,y:.3,z:.3}).updateModelMatrix();f.setPosition({x:-14}).setRotation({z:-3*e}).updateModelMatrix();y.setScale({x:.3,y:.3,z:.3}).updateModelMatrix();x.setPosition({x:5}).updateModelMatrix();h.updateWorldMatrix();u.render(r);c.render(r);p.render(r);v.render(r);y.render(r);w.render(r);r.endPass();a.queue.submit([i.finish()])})})}();
